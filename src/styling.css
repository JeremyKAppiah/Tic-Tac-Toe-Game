/* --- Existing Reset & Base --- */
* { box-sizing: border-box; }
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  text-align: center;
  margin: 0;
  padding: 20px;
  background: radial-gradient(#61dafb 30%, #20232a 90%);
  color: white;
  user-select: none;
}

/* --- Board --- */
.board {
  display: grid;
  margin: 20px auto;
  gap: 8px;
  max-width: 80vmin;
  max-height: 80vmin;
}
.cell {
  background: #61dafb;
  border-radius: 8px;
  border: 2px solid #7f00ff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: calc(40px / 3 * var(--board-size));
  font-weight: bold;
  color: #20232a;
  cursor: pointer;
  transition: background 0.3s, transform 0.15s;
  aspect-ratio: 1 / 1;
  user-select: none;
}
.cell:hover { background: #21a1f1; transform: scale(1.1); }
.cell.highlight { background: #ffe066; color: #20232a; }

/* --- Status text --- */
.status-text-x,
.status-text-o {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  font-size: 2.2rem;
  font-weight: 900;
  letter-spacing: 0.04em;
  width: 50%;
  animation: popTurn 0.4s;
  color: #fff;
  -webkit-text-stroke: 0;
  text-shadow: none;
  display: flex;
  align-items: center;
  justify-content: center;
}
.status-text-x { left: 150px; text-align: left; justify-content: left; }
.status-text-o { right: 150px; text-align: right; justify-content: right; }
@keyframes popTurn { 0% { opacity: 0; transform: scale(0.7) translateY(10px);} 60% { opacity: 1; transform: scale(1.1) translateY(-4px);} 100% { opacity: 1; transform: scale(1) translateY(0);} }

/* --- Controls --- */
.controls { margin-bottom: 20px; font-size: 1rem; }
.controls label { margin-right: 15px; user-select: none; }



.info-icon {
  position: relative;
  cursor: pointer;
  font-size: 1.3rem;
}

.info-icon .tooltip {
  visibility: hidden;
  width: 220px;
  background-color: #333;
  color: #fff;
  text-align: left;
  padding: 8px;
  border-radius: 6px;
  position: absolute;
  z-index: 1;

  /* Position to the left */
  top: 50%;
  right: 125%; /* push left outside the icon */
  transform: translateY(-50%);

  opacity: 0;
  transition: opacity 0.3s;
  font-size: 0.9rem;
}

.info-icon:hover .tooltip {
  visibility: visible;
  opacity: 1;
}


/* --- Board size input bigger --- */
.controls label input[type="number"]#boardSize {
  width: 90px;
  height: 2.8em;
  font-size: 1.5rem;
  padding: 6px 10px;
  border-radius: 6px;
  border: 2px solid #7f00ff;
  margin-left: 8px;
  background: #181a20;
  color: #fff;
  box-shadow: 0 0 8px #7f00ff22;
  outline: none;
  transition: border-color 0.3s;
}
.controls label input[type="number"]#boardSize:focus { border-color: #7f00ff; }

/* --- Restart button --- */
#restartButton {
  position: fixed; top: 24px; right: 32px; z-index: 300;
  background: white; color: #282c34; font-weight: 700;
  padding: 10px 25px; border-radius: 8px; border: 2px solid #7f00ff;
  cursor: pointer; font-size: 1.2rem; box-shadow: 0 0 12px #7f00ff22;
  transition: background 0.3s, color 0.3s, box-shadow 0.3s;
  display: none;
}
body.show-restart #restartButton { display: block; }
#restartButton:hover { background: #7f00ff; color: #fff; box-shadow: 0 0 12px #7f00ff,0 0 24px #7f00ff; }

/* --- Start button --- */
#startButton,.start-btn {
  background: white; color: #282c34; font-weight: 700;
  padding: 10px 25px; border-radius: 8px; border: 2px solid #7f00ff;
  cursor: pointer; font-size: 1.2rem; box-shadow: 0 0 12px #7f00ff22;
  transition: background 0.3s, color 0.3s, box-shadow 0.3s; margin-left: 12px;
}
#startButton:hover,.start-btn:hover { background: #7f00ff; color: #fff; box-shadow:0 0 12px #7f00ff,0 0 24px #7f00ff; }

/* --- Home Button --- */
.home-btn { 
  position: fixed; top:16px; left:16px; background:white; border-radius:50%; 
  border:2px solid #7f00ff; padding:10px; cursor:pointer; z-index:500; 
  display:block;
}
.home-btn:hover {
  background: #7f00ff; color: white;
  box-shadow: 0 0 12px #7f00ff, 0 0 24px #7f00ff;
}

/* --- Top-right Toggle --- */
.top-right-controls { position: fixed; top: 16px; right: 16px; color:white; z-index:500; font-weight:bold; display:flex; align-items:center; gap:8px; }

/* --- Turn underline & avatar icon --- */
.turn-text { border-bottom: 3px solid #7f00ff; padding-bottom: 3px; font-weight:900; display:inline-block; margin-right:8px; }
.turn-avatar { width:36px; height:36px; margin-left:8px; border-radius:50%; border:2px solid #7f00ff; }

/* --- Avatar toggle switch --- */
.avatar-toggle { display:inline-flex; align-items:center; margin-left:12px; font-weight:700; }
.switch { position: relative; display:inline-block; width:46px; height:24px; margin-left:8px; }
.switch input { display:none; }
.slider {
  position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0;
  background-color:#ccc; border-radius:34px; transition:0.4s;
}
.slider:before {
  position:absolute; content:""; height:18px; width:18px; left:3px; bottom:3px;
  background-color:white; border-radius:50%; transition:0.4s;
}
input:checked + .slider { background-color:#7f00ff; }
input:checked + .slider:before { transform:translateX(22px); }

/* --- Avatar selection panel --- */
.avatar-selection { display:flex; gap:20px; margin-top:10px; justify-content:center; flex-wrap:wrap; }
.avatar-option { width:36px; height:36px; border-radius:50%; border:2px solid transparent; cursor:pointer; transition:border 0.3s, transform 0.2s; }
.avatar-option:hover { transform:scale(1.1); }
.avatar-option.selected { border-color:#7f00ff; }
.cell-avatar { width:60%; height:60%; object-fit:contain; }

/* --- Floating Marks --- */
.floating-marks { position:absolute; inset:0; overflow:hidden; pointer-events:none; z-index:0; }
.floating-mark { position:absolute; font-size:2rem; font-weight:900; color:rgba(255,255,255,0.15); user-select:none; animation-name:floatAround; animation-timing-function:ease-in-out; animation-iteration-count:infinite; animation-direction:alternate; }
@keyframes floatAround { 0%{transform:translate(0,0) rotate(0deg);opacity:0.3;}50%{transform:translate(20px,-30px) rotate(20deg);opacity:0.6;}100%{transform:translate(0,0) rotate(0deg);opacity:0.3;} }

/* --- Popup modal --- */
.message-popup { position:fixed; inset:0; background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:200; }
.hidden { display:none; }
.popup-content {
  background:white; color:#282c34; padding:25px 40px; border-radius:12px;
  text-align:center; min-width:250px; font-weight:700; font-size:1.5rem;
  user-select:none; box-shadow:0 0 15px rgba(0,0,0,0.3);
}
.popup-content button {
  margin-top:20px; font-size:1.1rem; padding:8px 20px; border:none;
  border-radius:8px; background-color:#61dafb; color:#282c34;
  cursor:pointer; font-weight:700; transition:background-color 0.3s;
}
.popup-content button:hover { background-color:#21a1f1; }

/* --- Landing --- */
.landing-overlay {
  position:fixed; inset:0; background:radial-gradient(#61dafb 30%,#20232a 90%);
  display:flex; align-items:center; justify-content:center; z-index:100;
  flex-direction:column; color:white; font-weight:700; font-size:2rem;
  user-select:none; transition:opacity 0.5s ease; overflow:hidden;
}
.landing-main-container {
  background:rgba(40,44,52,0.85); border-radius:24px;
  box-shadow:0 8px 32px rgba(127,0,255,0.18),0 2px 8px rgba(0,0,0,0.12);
  padding:48px 32px 36px 32px; display:flex; flex-direction:column;
  align-items:center; gap:18px; max-width:420px; margin:0 auto;
  border:2px solid #7f00ff; backdrop-filter:blur(2px);
}
.landing-main-container h2 { margin-bottom:0.5em; font-size:2.2rem; }
.landing-main-container p { font-size:1.15rem; color:#eee; margin:0 0 1.2em 0; }

